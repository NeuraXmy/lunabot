# 群消息统计服务 (sta)

基于 record 服务记录的消息提供群消息统计功能

###  指令列表

- [`/sta_notify_{on|off}` 开启/关闭群消息统计通知](#stanotifyonoff)
- [`/sta` 发送群消息统计图](#sta)
- [`/sta_add` 添加词汇到用户词典](#staadd)*
- [`/sta_ban` 添加词汇到停用词典](#staban)*
- [`/sta_time` 发送群消息关于时间的统计图](#statime)
- [`/sta_word` 发送群消息关于词汇的统计图](#staword)
- [`/sta_cancel_today` 取消当天的群消息统计](#stacanceltoday)*


---


## `/sta_notify_{on|off}`

开启/关闭群消息统计通知，开启后每天晚上23:55会发送群消息统计图

- **使用方式**

    `/sta_notify_on` 开启群消息统计通知

    `/sta_notify_off` 关闭群消息统计通知


## `/sta`

发送群消息统计图，统计图说明：
```
饼图中扇形名字格式为 用户名(总消息数,图片表情数)
词云下方为词发言量统计，格式为 [词] 发言第1用户(占比) 发言第2用户(占比) ...
最下方统计图中，条形图内浅色为图片表情发言量
```

- **使用方式**

    `/sta <date>` date可以省略，默认为当天

    `/sta <delta>` delta为负天数，表示统计多少天前的数据

- **示例**

    `/sta 2021-10-01` 发送2021年10月1日的群消息统计图

    `/sta -7` 发送7天前的群消息统计图

    `/sta` 发送当天的群消息统计图


## `/sta_add`

添加词汇到生成统计图时使用的用户词典（所有群聊公用）

- **使用方式**

    `/sta_add <word1> <word2> ...`

- **示例**

    `/sta_add 你好 世界` 添加词汇"你好"和"世界"到用户词典


## `/sta_ban`

添加词汇到生成统计图时使用的停用词典（所有群聊公用）

- **使用方式**

    `/sta_ban <word1> <word2> ...`

- **示例**

    `/sta_ban 你好 世界` 添加词汇"你好"和"世界"到停用词典


## `/sta_time`

发送群消息关于时间的统计图

- **使用方式**

    `/sta_time <days>` 最近days天的统计图，days可以省略，默认为30天
    `/sta_time <days> @用户` 关于指定用户的统计图

- **示例**

    `/sta_time 7` 发送最近7天的群消息关于时间的统计图

    `/sta_time 7 @user` 发送最近7天用户user的群消息关于时间的统计图


## `/sta_word`

发送群消息关于词汇的统计图

- **使用方式**

    `/sta_word <words> <days>` 最近days天的统计图，days可以省略，默认为30天，words可以输入多个单词，以逗号分割

- **示例**

    `/sta_word 你好,世界 7` 发送最近7天的群消息关于你好和世界的统计图


## `/sta_cancel_today`

取消当天的群消息统计

- **使用方式**

    `/sta_cancel_today`

- **示例**

    `/sta_cancel_today` 取消当天的群消息统计






--- 

[回到帮助目录](./main.md)